if (canUseWebP() ) {
    $("img").each(function() {
        try {   $(this).attr("data-src", $(this).attr("data-src").replace(".png", ".webp"))
          
        } catch (e) { console.warn(e)}
        try {
            $(this).attr("src", $(this).attr("src").replace(".png", ".webp"))
            console.warn( $(this).html());
        } catch (e) { console.warn(e)}});
    }else{
    $("img").each(function() {
        try {
            $(this).attr("src", $(this).attr("src").replace(".webp", ".png"))
            console.warn("3");
        } catch (e) {}
        try {
            $(this).attr("data-src", $(this).attr("data-src").replace(".webp", ".png"))
            console.warn("4");
        } catch (e) {}});
};

function canUseWebP() {
var e = document.createElement("canvas");
return !(!e.getContext || !e.getContext("2d")) && 0 == e.toDataURL("image/webp").indexOf("data:image/webp")
} 
function checkVisible( elm, eval ) {
    eval = eval || "visible";
    var vpH = $(window).height(), // Viewport Height
        st = $(window).scrollTop(), // Scroll Top
        y = $(elm).offset().top,
        elementHeight = $(elm).height();
    
    if (eval == "visible") return ((y < (vpH + st)) && (y > (st - elementHeight)));
    if (eval == "above") return ((y < (vpH + st)));
}
